# 存储器结构

为了使得存储器的访问速度能跟得上处理机的运行速度，设置多层结构。
存储器至少三级：CPU寄存器、主存、辅存。
其中CPU寄存器、主存CPU可直接访问，被称为可执行存储器。

## CPU寄存器

## 主存(内存)

### 结构

- 高速缓存

	- 特点

		- 物理上独立存在
		- 介于寄存器、存储器之间
		- 备份主存中常用数据
		- 速度快于主存

- 磁盘缓存

	- 特点

		- 物理上属于主存
		- 备份常用磁盘数据
		- 速度快于辅存

### 程序的装入和链接

用户源程序必须经过编译、链接、装入才能真正运行。

- 绝对装入方式

	- 使用绝对地址
	- 仅在早期单道系统中存在

- 可重定位装入方式

	- 含义

		- 装入是对程序中地址修改

	- 分类

		- 动态重定位

			- 地址转换执行时才进行

		- 静态重定位

			- 装入时一次性装入
			- 缺点

				- 不允许目标程序在内存中移动
				- 不允许程序运行时动态扩充内存

## 虚拟存储器管理

## 实存储器管理

### 连续分配方式

- 单一连续分配

	- 只能用于单用户、单任务系统
	- 内存分为系统区和用户区

- 固定分区分配

	- 固定：分区大小、个数
	- 分区划分方式

		- 分区大小相等

			- 一台计算机对应多个相同的对象

		- 内存分配

			- 最先适应法

				- 顺序检索出一个可用分区

			- 最佳适应法

				- 检索出可用的最小分区

- 动态(可变式)分区分配

	- 数据结构

		- 空闲分区表
		- 空闲分区链

	- 分区分配操作

		- 分配内存
		- 回收内存

	- 分配算法

		- 基于顺序检索的分区分配算法

		  特点：内存利用率最高

			- 最先适应法

			  特点：
			  保留高址部分大分区
			  低址部分碎片多
			  查找开销大

			- 循环首次适应法

			  方式：从上一次的空闲分配开始查找
			  特点：
			  分区分布均匀
			  缺乏大分区

			- “最佳”适应法

			  方式：检索出尺寸满足要求的最小分区
			  特点：
			  碎片最小

			- “最坏”适应法

			  方式：方式：检索出尺寸满足要求的最大分区
			  特点：碎片最大

		- 基于索引检索的分区分配算法

			- 快速适应算法

			  方式：将空闲分区根据大小进行分类，单独设立一个空闲分区表。内存中设立管理索引表，用于记录空闲分区链表头指针。
			  特点：查找效率最高

				- 查找效率最高

			- 哈希算法

- 动态可重定位分区分配

	- 动态重定位分区分配算法

### 离散分配方式

- 基本分页存储管理

	- 页面和物理块

		- 页面

			- 把进程的逻辑地址空间分成若干大小相等的片

				- 

		- 物理块

			- 把内存分成与页面大小相同的存储块

	- 地址变换结构

		- 页表

			- 页号|块号
			- 页表存放在主存

		- 地址结构

			- 页号|位移量

	- 两级和多级页表

		- 外层页号|外层页内地址|页内地址

- 分段存储管理
- 段页式存储管理

